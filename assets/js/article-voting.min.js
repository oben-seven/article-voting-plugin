jQuery(document).ready(function(i){var t;t=article_voting_params.post_id,localStorage.getItem("voted_"+t)&&i.ajax({type:"POST",url:article_voting_params.ajax_url,data:{action:"get_voting_percentage",post_id:t},success:function(t){var e,a,s;t.success?(e=0<(s=t.data).positive_votes?Math.round(s.positive_votes/s.total_votes*100):0,a=0<s.negative_votes?Math.round(s.negative_votes/s.total_votes*100):0,console.log(s),i(".article-voting button").prop("disabled",!0),i(".article-voting").append('<div class="article-voting-result">'),i(".article-voting").append('<p class="result-text">THANK YOU FOR YOUR FEEDBACK.</p>'),i(".article-voting").append(`<span class="vote-yes yes-result">&#128516; ${e}%</span>`),i(".article-voting").append(`<span class="vote-no no-result">&#128542; ${0===a?"0":a}%</span>`),i(".article-voting").append("</div>"),s=sessionStorage.getItem("votedButton"),i(".yes-result, .no-result").removeClass("active"),i(`.${s}-result`).addClass("active")):alert(t.data)},error:function(t){console.log(t)}}),i(".article-voting button").on("click",function(){var o,n,t=i(this).hasClass("vote-yes")?"yes":"no";o=article_voting_params.post_id,n=t,i.ajax({type:"POST",url:article_voting_params.ajax_url,data:{action:"save_vote",post_id:o,vote:n},success:function(t){var e,a,s;t.success?(s=t.data,console.log(s),a=0<(e=s.positive_votes+s.negative_votes)?Math.round(s.positive_votes/e*100):0,s=0<e?Math.round(s.negative_votes/e*100):0,i(".article-voting button").prop("disabled",!0),i(".article-voting").append('<div class="article-voting-result">'),i(".article-voting").append('<p class="result-text">THANK YOU FOR YOUR FEEDBACK.</p>'),i(".article-voting").append(`<span class="vote-yes yes-result">&#128516; ${a}%</span>`),i(".article-voting").append(`<span class="vote-no no-result">&#128542; ${s}%</span>`),i(".article-voting").append("</div>"),i(".yes-result, .no-result").removeClass("active"),i(`.${n}-result`).addClass("active"),localStorage.setItem("voted_"+o,!0),sessionStorage.setItem("votedButton",n)):alert(t.data)},error:function(t){console.log(t)}})}),window.addEventListener("load",function(){const e=sessionStorage.getItem("votedButton");var t;e&&((t=document.querySelector(".vote-"+e))&&t.classList.add("active"),document.querySelectorAll(".yes-result, .no-result").forEach(t=>{t.classList.contains(e+"-result")?t.classList.add("active"):t.classList.remove("active")}))})});